<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <title>Practical Unix For Ruby &amp; Rails</title>
  <style type="text/css">
    body {
  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
  color: #222;
  background-color: #f7f7f7;
  font-size: 100%;
}

.slide {
  position: absolute;
  top: 0; bottom: 0;
  left: 0; right: 0;
}

.slide-content {
  width: 800px;
  height: 600px;
  overflow: hidden;
  margin: 80px auto 0 auto;
  padding: 30px;

  font-weight: 200;
  font-size: 200%;
  line-height: 1.375;
}

.controls {
  position: absolute;
  bottom: 20px;
  left: 20px;
}

.arrow {
  width: 0; height: 0;
  border: 30px solid #333;
  float: left;
  margin-right: 30px;

  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.prev {
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;

  border-left-width: 0;
  border-right-width: 50px;
}

.next {
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-right-color: transparent;

  border-left-width: 50px;
  border-right-width: 0;
}

.prev:hover {
  border-right-color: #888;
  cursor: pointer;
}

.next:hover {
  border-left-color: #888;
  cursor: pointer;
}

h1 {
  font-size: 300%;
  line-height: 1.2;
  text-align: center;
  margin: 170px 0 0;
}

h2 {
  font-size: 100%;
  line-height: 1.2;
  margin: 5px 0;
  text-align: center;
  font-weight: 200;
}

h3 {
  font-size: 140%;
  line-height: 1.2;
  border-bottom: 1px solid #aaa;
  margin: 0;
  padding-bottom: 15px;
}

ul {
  padding: 20px 0 0 60px;
  font-weight: 200;
  line-height: 1.375;
}

.author h1 {
  font-size: 170%;
  font-weight: 200;
  text-align: center;
  margin-bottom: 30px;
}

.author h3 {
  font-weight: 100;
  text-align: center;
  font-size: 95%;
  border: none;
}

a {
  text-decoration: none;
  color: #44a4dd;
}

a:hover {
  color: #66b5ff;
}

pre {
  font-size: 60%;
  line-height: 1.3;
}

.progress {
  position: fixed;
  top: 0; left: 0; right: 0;
  height: 3px;
}

.progress-bar {
  width: 0%;
  height: 3px;
  background-color: #b4b4b4;

  -webkit-transition: width 0.05s ease-out;
  -moz-transition: width 0.05s ease-out;
  -o-transition: width 0.05s ease-out;
  transition: width 0.05s ease-out;
}

.hidden {
  display: none;
}

@media (max-width: 850px) {

  body {
    font-size: 70%;
  }

  .slide-content {
    width: auto;
  }

  img {
    width: 100%;
  }

  h1 {
    margin-top: 120px;
  }

  .prev, .prev:hover {
    border-right-color: rgba(135, 135, 135, 0.5);
  }

  .next, .next:hover {
    border-left-color: rgba(135, 135, 135, 0.5);
  }
}

@media (max-width: 480px) {
  body {
    font-size: 50%;
    overflow: hidden;
  }

  .slide-content {
    padding: 10px;
    margin-top: 10px;
    height: 340px;
  }

  h1 {
    margin-top: 50px;
  }

  ul {
    padding-left: 25px;
  }
}

@media print {
  * {
    -webkit-print-color-adjust: exact;
  }

  @page {
    size: letter;
  }

  .hidden {
    display: inline;
  }

  html {
    width: 100%;
    height: 100%;
    overflow: visible;
  }

  body {
    margin: 0 auto !important;
    border: 0;
    padding: 0;
    float: none !important;
    overflow: visible;
    background: none !important;
    font-size: 52%;
  }

  .progress, .controls {
    display: none;
  }

  .slide {
    position: static;
  }

  .slide-content {
    border: 1px solid #222;
    margin-top: 0;
    margin-bottom: 40px;
    height: 3.5in;
    overflow: visible;
  }

  .slide:nth-child(even) {
    /* 2 slides per page */
    page-break-before: always;
  }
}

/*
github.com style (c) Vasily Polovnyov <vast@whiteants.net>
*/

code, pre {
  border: 1px solid #ddd;
  border-radius: 3px;
  overflow: auto;
  padding: 6px 10px;
}

code {
  padding: 0 5px;
}

pre>code {
  margin: 0; padding: 0;
  border: none;
  background: transparent;
}

pre .comment,
pre .template_comment,
pre .diff .header,
pre .javadoc {
  color: #998;
  font-style: italic
}

pre .keyword,
pre .css .rule .keyword,
pre .winutils,
pre .javascript .title,
pre .nginx .title,
pre .subst,
pre .request,
pre .status {
  color: #333;
  font-weight: bold
}

pre .number,
pre .hexcolor,
pre .ruby .constant {
  color: #099;
}

pre .string,
pre .tag .value,
pre .phpdoc,
pre .tex .formula {
  color: #d14
}

pre .title,
pre .id {
  color: #900;
  font-weight: bold
}

pre .javascript .title,
pre .lisp .title,
pre .clojure .title,
pre .subst {
  font-weight: normal
}

pre .class .title,
pre .haskell .type,
pre .vhdl .literal,
pre .tex .command {
  color: #458;
  font-weight: bold
}

pre .tag,
pre .tag .title,
pre .rules .property,
pre .django .tag .keyword {
  color: #000080;
  font-weight: normal
}

pre .attribute,
pre .variable,
pre .lisp .body {
  color: #008080
}

pre .regexp {
  color: #009926
}

pre .class {
  color: #458;
  font-weight: bold
}

pre .symbol,
pre .ruby .symbol .string,
pre .lisp .keyword,
pre .tex .special,
pre .prompt {
  color: #990073
}

pre .built_in,
pre .lisp .title,
pre .clojure .built_in {
  color: #0086b3
}

pre .preprocessor,
pre .pi,
pre .doctype,
pre .shebang,
pre .cdata {
  color: #999;
  font-weight: bold
}

pre .deletion {
  background: #fdd
}

pre .addition {
  background: #dfd
}

pre .diff .change {
  background: #0086b3
}

pre .chunk {
  color: #aaa
}

.slide-number {
  font-size: 50%;
}

  </style>
</head>
<body>
    <div class="progress">
    <div class="progress-bar"></div>
  </div>

  <div class="slide" id="slide-1">
    <section class="slide-content">
      <div class="slide-number">1</div>
      <h1 id="practical-unix-for-ruby-rails">Practical Unix For Ruby &amp; Rails</h1>
<h2 id="sdruby-september-2014">SDRuby - September, 2014</h2>
<h2 id="ylan-segal">Ylan Segal</h2>

    </section>
  </div>
  <div class="slide hidden" id="slide-2">
    <section class="slide-content">
      <div class="slide-number">2</div>
      <h3 id="the-unix-philosophy">The Unix Philosophy</h3>
<blockquote>
<p>Many UNIX programs do quite trivial things in isolation, but, combined with other programs,
become general and useful tools.</p>
</blockquote>
<ul>
<li>The UNIX Programming Environment, Brian Kernighan and Rob Pike</li>
</ul>

    </section>
  </div>
  <div class="slide hidden -" id="slide-3">
    <section class="slide-content">
      <div class="slide-number">3</div>
      <h3 id="bash">Bash</h3>
<p>You already have it on Mac and Linux.</p>
<p>On Windows: Use Cygwin or VM</p>

    </section>
  </div>
  <div class="slide hidden" id="slide-4">
    <section class="slide-content">
      <div class="slide-number">4</div>
      <h3 id="tail-the-log">Tail The Log</h3>
<pre><code class="lang-bash">$ tail -f log/development.log
Started GET <span class="string">"/tokens/new"</span> <span class="keyword">for</span> 127.0.0.1 at 2014-08-27 20:03:43 -0700
Processing by TokensController<span class="comment">#new as HTML</span>
  User Load (0.3ms)  SELECT  <span class="string">"users"</span>.* FROM <span class="string">"users"</span>  WHERE <span class="string">"users"</span>.<span class="string">"id"</span> = 3  ORDER BY <span class="string">"users"</span>.<span class="string">"id"</span> ASC LIMIT 1
  Rendered tokens/_form.html.haml (78.0ms)
  Rendered tokens/new.html.haml within layouts/application (86.9ms)
  Rendered layouts/_navigation.html.haml (0.3ms)
  Rendered layouts/_messages.html.haml (0.1ms)
Completed 200 OK <span class="keyword">in</span> 119ms (Views: 115.8ms | ActiveRecord: 0.3ms)


Started POST <span class="string">"/tokens"</span> <span class="keyword">for</span> 127.0.0.1 at 2014-08-27 20:03:46 -0700
Processing by TokensController<span class="comment">#create as HTML</span>
  Parameters: {<span class="string">"utf8"</span>=&gt;<span class="string">"âœ“"</span>, <span class="string">"authenticity_token"</span>=&gt;<span class="string">"+/a7r/ubDAn1vSf5CjhrgxPzSHfemFhUxJhrapbR2BA="</span>, <span class="string">"token"</span>=&gt;{<span class="string">"name"</span>=&gt;<span class="string">"ad"</span>, <span class="string">"secret"</span>=&gt;<span class="string">"[FILTERED]"</span>}, <span class="string">"commit"</span>=&gt;<span class="string">"Create Token"</span>}
  User Load (0.2ms)  SELECT  <span class="string">"users"</span>.* FROM <span class="string">"users"</span>  WHERE <span class="string">"users"</span>.<span class="string">"id"</span> = 3  ORDER BY <span class="string">"users"</span>.<span class="string">"id"</span> ASC LIMIT 1
   (0.1ms)  begin transaction
  SQL (32.5ms)  INSERT INTO <span class="string">"tokens"</span> (<span class="string">"created_at"</span>, <span class="string">"name"</span>, <span class="string">"secret"</span>, <span class="string">"updated_at"</span>, <span class="string">"user_id"</span>) VALUES (?, ?, ?, ?, ?)  [[<span class="string">"created_at"</span>, <span class="string">"2014-08-28 03:03:46.418899"</span>], [<span class="string">"name"</span>, <span class="string">"ad"</span>], [<span class="string">"secret"</span>, <span class="string">"asdasdasd"</span>], [<span class="string">"updated_at"</span>, <span class="string">"2014-08-28 03:03:46.418899"</span>], [<span class="string">"user_id"</span>, 3]]
   (1.8ms)  commit transaction
Redirected to http://localhost:3000/tokens
Completed 302 Found <span class="keyword">in</span> 41ms (ActiveRecord: 34.6ms)
...</code></pre>

    </section>
  </div>
  <div class="slide hidden -" id="slide-5">
    <section class="slide-content">
      <div class="slide-number">5</div>
      <h3 id="turn-down-the-noise">Turn Down The Noise</h3>
<pre><code class="lang-bash">$ tail -f log/development.log | grep <span class="string">'^Started'</span>
Started GET <span class="string">"/"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 13:57:46 -0700
Started GET <span class="string">"/"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 13:59:02 -0700
Started DELETE <span class="string">"/users/sign_out"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 14:54:53 -0700
Started GET <span class="string">"/"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 14:54:53 -0700
Started GET <span class="string">"/"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 14:55:04 -0700
Started GET <span class="string">"/"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 14:55:08 -0700
Started GET <span class="string">"/"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 14:55:40 -0700
Started GET <span class="string">"/users/sign_in"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 14:55:40 -0700
Started POST <span class="string">"/users/sign_in"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 14:55:53 -0700
Started GET <span class="string">"/"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 14:55:53 -0700
Started GET <span class="string">"/users/edit"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 15:10:13 -0700
Started GET <span class="string">"/"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 15:10:28 -0700
Started GET <span class="string">"/users/edit"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 15:10:56 -0700
Started GET <span class="string">"/users/edit"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 15:11:08 -0700
Started GET <span class="string">"/users"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 15:11:11 -0700
Started GET <span class="string">"/"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 15:11:15 -0700
Started GET <span class="string">"/users/edit"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 15:11:16 -0700
Started GET <span class="string">"/"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 15:11:17 -0700
Started GET <span class="string">"/users/edit"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 15:11:20 -0700
Started GET <span class="string">"/"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 15:13:52 -0700
Started GET <span class="string">"/"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 15:26:23 -0700
Started GET <span class="string">"/tokens/new"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 15:26:24 -0700
Started GET <span class="string">"/tokens/new"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 15:27:16 -0700
Started POST <span class="string">"/tokens"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 16:05:08 -0700
Started POST <span class="string">"/tokens"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 16:08:05 -0700
Started POST <span class="string">"/tokens"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 16:08:17 -0700</code></pre>

    </section>
  </div>
  <div class="slide hidden -" id="slide-6">
    <section class="slide-content">
      <div class="slide-number">6</div>
      <h1 id="how-many-times-has-each-endpoint-been-hit-">How many times has each endpoint been hit?</h1>

    </section>
  </div>
  <div class="slide hidden -" id="slide-7">
    <section class="slide-content">
      <div class="slide-number">7</div>
      <h3 id="extract-information">Extract Information</h3>
<pre><code class="lang-bash">$ grep <span class="string">'^Started'</span> log/development.log
Started GET <span class="string">"/"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 13:29:47 -0700
Started GET <span class="string">"/users/sign_in"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 13:29:55 -0700
Started GET <span class="string">"/users/sign_up"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 13:29:56 -0700
Started POST <span class="string">"/users"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 13:30:21 -0700
Started GET <span class="string">"/"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 13:30:21 -0700
Started GET <span class="string">"/users/1"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 13:30:30 -0700
Started GET <span class="string">"/"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 13:30:35 -0700
Started GET <span class="string">"/"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 13:45:04 -0700
Started GET <span class="string">"/users/1"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 13:45:23 -0700
Started GET <span class="string">"/"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 13:45:29 -0700
Started GET <span class="string">"/users/1"</span> <span class="keyword">for</span> 127.0.0.1 at 2013-09-06 13:45:51 -0700
...</code></pre>

    </section>
  </div>
  <div class="slide hidden -" id="slide-8">
    <section class="slide-content">
      <div class="slide-number">8</div>
      <h3 id="extract-information">Extract Information</h3>
<pre><code class="lang-bash">$ grep <span class="string">'^Started'</span> log/development.log | grep --only-matching <span class="string">'".*"'</span>
<span class="string">"/"</span>
<span class="string">"/users/sign_in"</span>
<span class="string">"/users/sign_up"</span>
<span class="string">"/users"</span>
<span class="string">"/"</span>
<span class="string">"/users/1"</span>
<span class="string">"/"</span>
<span class="string">"/"</span>
<span class="string">"/users/1"</span>
<span class="string">"/"</span>
<span class="string">"/users/1"</span>
...</code></pre>

    </section>
  </div>
  <div class="slide hidden -" id="slide-9">
    <section class="slide-content">
      <div class="slide-number">9</div>
      <h3 id="extract-information">Extract Information</h3>
<pre><code class="lang-bash">$ grep <span class="string">'^Started'</span> log/development.log | grep -o <span class="string">'".*"'</span> | sort
<span class="string">"/"</span>
<span class="string">"/"</span>
<span class="string">"/"</span>
<span class="string">"/"</span>
<span class="string">"/"</span>
<span class="string">"/"</span>
<span class="string">"/"</span>
<span class="string">"/"</span>
<span class="string">"/"</span>
<span class="string">"/"</span>
<span class="string">"/"</span>
...</code></pre>

    </section>
  </div>
  <div class="slide hidden -" id="slide-10">
    <section class="slide-content">
      <div class="slide-number">10</div>
      <h3 id="extract-information">Extract Information</h3>
<pre><code class="lang-bash">$  grep <span class="string">'^Started'</span> log/development.log | grep -o <span class="string">'".*"'</span> | sort | uniq
<span class="string">"/"</span>
<span class="string">"//users/sign_in"</span>
<span class="string">"/session/sign_out"</span>
<span class="string">"/token"</span>
<span class="string">"/tokens"</span>
<span class="string">"/tokens/"</span>
<span class="string">"/tokens/1"</span>
<span class="string">"/tokens/1/edit"</span>
<span class="string">"/tokens/10"</span>
<span class="string">"/tokens/10/edit"</span>
<span class="string">"/tokens/11"</span>
<span class="string">"/tokens/11/edit"</span>
<span class="string">"/tokens/14/edit"</span>
<span class="string">"/tokens/2"</span>
<span class="string">"/tokens/2/edit"</span>
<span class="string">"/tokens/3"</span>
<span class="string">"/tokens/3/edit"</span>
<span class="string">"/tokens/4"</span>
<span class="string">"/tokens/5"</span>
<span class="string">"/tokens/5/edit"</span>
<span class="string">"/tokens/6"</span>
<span class="string">"/tokens/6/edit"</span>
<span class="string">"/tokens/7"</span>
<span class="string">"/tokens/7/edit"</span>
<span class="string">"/tokens/9"</span>
<span class="string">"/tokens/new"</span>
<span class="string">"/users"</span>
<span class="string">"/users/1"</span>
<span class="string">"/users/edit"</span>
<span class="string">"/users/sign_in"</span>
<span class="string">"/users/sign_out"</span>
<span class="string">"/users/sign_up"</span></code></pre>

    </section>
  </div>
  <div class="slide hidden -" id="slide-11">
    <section class="slide-content">
      <div class="slide-number">11</div>
      <h3 id="extract-information">Extract Information</h3>
<pre><code class="lang-bash">$ grep <span class="string">'^Started'</span> log/development.log | grep -o <span class="string">'".*"'</span> \
| sed --regexp-extended <span class="string">'s/[0-9]+/:id/'</span>
<span class="string">"/"</span>
<span class="string">"/users/sign_in"</span>
<span class="string">"/users/sign_up"</span>
<span class="string">"/users"</span>
<span class="string">"/"</span>
<span class="string">"/users/:id"</span>
<span class="string">"/"</span>
<span class="string">"/"</span>
<span class="string">"/users/:id"</span>
<span class="string">"/"</span>
<span class="string">"/users/:id"</span>
...</code></pre>

    </section>
  </div>
  <div class="slide hidden -" id="slide-12">
    <section class="slide-content">
      <div class="slide-number">12</div>
      <h3 id="extract-information">Extract Information</h3>
<pre><code class="lang-bash">$ grep <span class="string">'^Started'</span> log/development.log | grep -o <span class="string">'".*"'</span> \
| sed -r <span class="string">'s/[[:digit:]]+/:id/'</span> | sort | uniq -c
 113 <span class="string">"/"</span>
   1 <span class="string">"//users/sign_in"</span>
   1 <span class="string">"/session/sign_out"</span>
   2 <span class="string">"/token"</span>
 267 <span class="string">"/tokens"</span>
   1 <span class="string">"/tokens/"</span>
  85 <span class="string">"/tokens/:id"</span>
  57 <span class="string">"/tokens/:id/edit"</span>
  30 <span class="string">"/tokens/new"</span>
   6 <span class="string">"/users"</span>
   3 <span class="string">"/users/:id"</span>
  13 <span class="string">"/users/edit"</span>
  35 <span class="string">"/users/sign_in"</span>
   8 <span class="string">"/users/sign_out"</span>
   3 <span class="string">"/users/sign_up"</span></code></pre>

    </section>
  </div>
  <div class="slide hidden -" id="slide-13">
    <section class="slide-content">
      <div class="slide-number">13</div>
      <h3 id="extract-information">Extract Information</h3>
<pre><code class="lang-bash">$ grep <span class="string">'^Started'</span> log/development.log | grep -o <span class="string">'".*"'</span> \
| sed -r <span class="string">'s/[[:digit:]]+/:id/'</span> | sort | uniq -c | sort --reverse
 267 <span class="string">"/tokens"</span>
 113 <span class="string">"/"</span>
  85 <span class="string">"/tokens/:id"</span>
  57 <span class="string">"/tokens/:id/edit"</span>
  35 <span class="string">"/users/sign_in"</span>
  30 <span class="string">"/tokens/new"</span>
  13 <span class="string">"/users/edit"</span>
   8 <span class="string">"/users/sign_out"</span>
   6 <span class="string">"/users"</span>
   3 <span class="string">"/users/sign_up"</span>
   3 <span class="string">"/users/:id"</span>
   2 <span class="string">"/token"</span>
   1 <span class="string">"/tokens/"</span>
   1 <span class="string">"/session/sign_out"</span>
   1 <span class="string">"//users/sign_in"</span></code></pre>
<p>Extra Credit: Normalize routes ending in &#39;/&#39; and starting in &#39;//&#39;</p>

    </section>
  </div>
  <div class="slide hidden -" id="slide-14">
    <section class="slide-content">
      <div class="slide-number">14</div>
      <h3 id="find-inside-files">Find Inside Files</h3>
<p><code>grep</code> has a few competitors: <code>ack</code> and <code>ag</code></p>
<pre><code class="lang-bash">$ ag <span class="string">'FactoryGirl'</span>
spec/controllers/home_controller_spec.rb
7:    let(:user) { FactoryGirl.create(:user) }

spec/controllers/tokens_controller_spec.rb
6:  let(:user) { FactoryGirl.create(:user) }
7:  let(:token) { FactoryGirl.create(:token, :user =&gt; user) }
29:      post :create, :token =&gt; FactoryGirl.attributes_for(:token)

spec/factories/tokens.rb
1:FactoryGirl.define <span class="keyword">do</span>

spec/factories/users.rb
3:FactoryGirl.define <span class="keyword">do</span>

spec/models/token_spec.rb
4:  subject(:token) { FactoryGirl.build(:token) }

spec/views/tokens/index.html.haml_spec.rb
5:    token = FactoryGirl.create(:token)</code></pre>

    </section>
  </div>
  <div class="slide hidden -" id="slide-15">
    <section class="slide-content">
      <div class="slide-number">15</div>
      <h3 id="lets-run-some-specs">Lets Run Some Specs</h3>
<p>Filter specs only:</p>
<pre><code class="lang-bash">$ ag <span class="string">'FactoryGirl'</span> | grep <span class="string">'^spec/.*_spec.rb'</span>
spec/controllers/home_controller_spec.rb:7:    let(:user) { FactoryGirl.create(:user) }
spec/controllers/tokens_controller_spec.rb:6:  let(:user) { FactoryGirl.create(:user) }
spec/controllers/tokens_controller_spec.rb:7:  let(:token) { FactoryGirl.create(:token, :user =&gt; user) }
spec/controllers/tokens_controller_spec.rb:29:      post :create, :token =&gt; FactoryGirl.attributes_for(:token)
spec/models/token_spec.rb:4:  subject(:token) { FactoryGirl.build(:token) }
spec/views/tokens/index.html.haml_spec.rb:5:    token = FactoryGirl.create(:token)</code></pre>
<p><code>ag</code> formats output differently when piped</p>

    </section>
  </div>
  <div class="slide hidden -" id="slide-16">
    <section class="slide-content">
      <div class="slide-number">16</div>
      <h3 id="lets-run-some-specs">Lets Run Some Specs</h3>
<p>Trim the fat:</p>
<pre><code class="lang-bash">$ ag <span class="string">'FactoryGirl'</span> | grep -o <span class="string">'^spec/.*_spec.rb'</span> | sort | uniq
spec/controllers/home_controller_spec.rb
spec/controllers/tokens_controller_spec.rb
spec/models/token_spec.rb
spec/views/tokens/index.html.haml_spec.rb</code></pre>

    </section>
  </div>
  <div class="slide hidden -" id="slide-17">
    <section class="slide-content">
      <div class="slide-number">17</div>
      <h3 id="lets-run-some-specs">Lets Run Some Specs</h3>
<p>Convert lines into arguments:</p>
<pre><code class="lang-bash">$ ag <span class="string">'FactoryGirl'</span> | grep -o <span class="string">'^spec/.*_spec.rb'</span> | sort | uniq | xargs rspec
rspec spec/controllers/home_controller_spec.rb spec/controllers/tokens_controller_spec.rb spec/models/token_spec.rb spec/views/tokens/index.html.haml_spec.rb
..............

Finished <span class="keyword">in</span> 0.41011 seconds (files took 1.53 seconds to load)
14 examples, 0 failures</code></pre>
<p><code>xargs</code> passes lines as arguments to any command</p>

    </section>
  </div>
  <div class="slide hidden -" id="slide-18">
    <section class="slide-content">
      <div class="slide-number">18</div>
      <h3 id="different-flavors-of-rspec">Different Flavors of RSpec</h3>
<pre><code class="lang-bash">$ rspec
$ bundle exec rspec
$ bin/rspec
$ rspec --drb
$ jruby --ng -S rspec
$ zeus rspec</code></pre>

    </section>
  </div>
  <div class="slide hidden -" id="slide-19">
    <section class="slide-content">
      <div class="slide-number">19</div>
      <h3 id="different-flavors-of-rspec">Different Flavors of RSpec</h3>
<p>Run binstub if we have them:</p>
<pre><code class="lang-bash">$ chmod +x smart_rspec</code></pre>
<pre><code class="lang-bash">$ cat smart_rspec
<span class="comment">#! /bin/bash</span>

<span class="comment"># Looking for binstubs</span>
<span class="keyword">if</span> <span class="test_condition">[ -f ./bin/rspec ]</span>; <span class="keyword">then</span>
  RSPEC=<span class="string">"bin/rspec"</span>
<span class="keyword">else</span>
  RSPEC=<span class="string">"bundle exec rspec"</span>
<span class="keyword">fi</span>

CMD=<span class="string">"<span class="variable">$RSPEC</span> $@"</span> <span class="comment"># Passing all arguments on to rspec</span>
<span class="keyword">echo</span> <span class="variable">$CMD</span>
<span class="variable">$CMD</span></code></pre>

    </section>
  </div>
  <div class="slide hidden -" id="slide-20">
    <section class="slide-content">
      <div class="slide-number">20</div>
      <h3 id="different-flavors-of-rspec">Different Flavors of RSpec</h3>
<pre><code class="lang-bash">$ lsof -i :3000
COMMAND   PID      USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME
ruby    58963 ylansegal   10u  IPv4 0x7f4d291ee5382f61      0t0  TCP *:hbci (LISTEN)
$ <span class="keyword">echo</span> $?
0</code></pre>
<pre><code class="lang-bash">$ lsof -i :3001
$ <span class="keyword">echo</span> $?
1</code></pre>

    </section>
  </div>
  <div class="slide hidden -" id="slide-21">
    <section class="slide-content">
      <div class="slide-number">21</div>
      <h3 id="different-flavors-of-rspec">Different Flavors of RSpec</h3>
<p>Looking for spork server:</p>
<pre><code class="lang-bash">$ cat smart_rspec
<span class="comment">#! /bin/bash</span>

SPORK_PORT=8989

<span class="comment"># Looking for binstubs</span>
<span class="keyword">if</span> <span class="test_condition">[ -f ./bin/rspec ]</span>; <span class="keyword">then</span>
  RSPEC=<span class="string">"bin/rspec"</span>
<span class="keyword">else</span>
  RSPEC=<span class="string">"bundle exec rspec"</span>
<span class="keyword">fi</span>

<span class="comment"># Looking for spork</span>
lsof -i :<span class="variable">$SPORK_PORT</span> &gt; /dev/null
<span class="keyword">if</span> <span class="test_condition">[ $? == 0 ]</span>; <span class="keyword">then</span>
  RSPEC=<span class="string">"<span class="variable">$RSPEC</span> --drb"</span>
<span class="keyword">fi</span>

CMD=<span class="string">"<span class="variable">$RSPEC</span> $@"</span> <span class="comment"># Passing all arguments on to rspec</span>
<span class="keyword">echo</span> <span class="variable">$CMD</span>
<span class="variable">$CMD</span></code></pre>

    </section>
  </div>
  <div class="slide hidden -" id="slide-22">
    <section class="slide-content">
      <div class="slide-number">22</div>
      <h3 id="different-flavors-of-rspec">Different Flavors of RSpec</h3>
<p>Looking for nailgun server:</p>
<pre><code class="lang-bash">$ cat smart_rspec
<span class="comment">#! /bin/bash</span>

NAILGUN_PORT=2113
SPORK_PORT=8989

<span class="comment"># Looking for binstubs</span>
<span class="comment"># ...</span>

<span class="comment"># Looking for nailgun</span>
lsof -i :<span class="variable">$NAILGUN_PORT</span> &gt; /dev/null
<span class="keyword">if</span> <span class="test_condition">[ $? == 0 ]</span>; <span class="keyword">then</span>
  RSPEC=<span class="string">"jruby --ng -S <span class="variable">$RSPEC</span>"</span>
<span class="keyword">fi</span>

<span class="comment"># Looking for spork</span>
lsof -i :<span class="variable">$SPORK_PORT</span> &gt; /dev/null
<span class="keyword">if</span> <span class="test_condition">[ $? == 0 ]</span>; <span class="keyword">then</span>
  RSPEC=<span class="string">"<span class="variable">$RSPEC</span> --drb"</span>
<span class="keyword">fi</span>

<span class="comment">#...</span></code></pre>

    </section>
  </div>
  <div class="slide hidden -" id="slide-23">
    <section class="slide-content">
      <div class="slide-number">23</div>
      <h3 id="different-flavors-of-rspec">Different Flavors of RSpec</h3>
<pre><code class="lang-bash">$ cat smart_rspec
<span class="comment">#...</span>
<span class="comment"># Looking for zeus socket</span>
<span class="keyword">if</span> <span class="test_condition">[ -S ./.zeus.sock ]</span>; <span class="keyword">then</span>
  RSPEC=<span class="string">"zeus rspec"</span>
<span class="keyword">else</span>
  <span class="comment"># Looking for binstubs</span>
  <span class="keyword">if</span> <span class="test_condition">[ -f ./bin/rspec ]</span>; <span class="keyword">then</span>
    RSPEC=<span class="string">"bin/rspec"</span>
  <span class="keyword">else</span>
    RSPEC=<span class="string">"bundle exec rspec"</span>
  <span class="keyword">fi</span>
  <span class="comment"># Looking for nailgun</span>
  lsof -i :<span class="variable">$NAILGUN_PORT</span> &gt; /dev/null
  <span class="keyword">if</span> <span class="test_condition">[ $? == 0 ]</span>; <span class="keyword">then</span>
    RSPEC=<span class="string">"jruby --ng -S <span class="variable">$RSPEC</span>"</span>
  <span class="keyword">fi</span>
  <span class="comment"># Looking for spork</span>
  lsof -i :<span class="variable">$SPORK_PORT</span> &gt; /dev/null
  <span class="keyword">if</span> <span class="test_condition">[ $? == 0 ]</span>; <span class="keyword">then</span>
    RSPEC=<span class="string">"<span class="variable">$RSPEC</span> --drb"</span>
  <span class="keyword">fi</span>
<span class="keyword">fi</span></code></pre>

    </section>
  </div>
  <div class="slide hidden -" id="slide-24">
    <section class="slide-content">
      <div class="slide-number">24</div>
      <h3 id="different-flavors-of-rspec">Different Flavors of RSpec</h3>
<pre><code class="lang-bash">$ smart_rspec spec/controllers/index_controller_spec.rb
jruby --ng -S bundle exec rspec --drb spec/controllers/index_controller_spec.rb
...</code></pre>
<pre><code class="lang-bash">$ smart_rspec spec/controllers/index_controller_spec.rb
zeus rspec spec/controllers/index_controller_spec.rb
....</code></pre>

    </section>
  </div>
  <div class="slide hidden -" id="slide-25">
    <section class="slide-content">
      <div class="slide-number">25</div>
      <h3 id="environment-configuration">Environment Configuration</h3>
<pre><code class="lang-bash">$ export RAILS_SECRET_TOKEN=b938f...
$ export DB_HOST=db.host.com
$ rails server</code></pre>
<p>or</p>
<pre><code class="lang-bash">$ DB_HOST=db.host.com RAILS_SECRET_TOKEN=b938f... rails server</code></pre>

    </section>
  </div>
  <div class="slide hidden -" id="slide-26">
    <section class="slide-content">
      <div class="slide-number">26</div>
      <h3 id="environment-configuration">Environment Configuration</h3>
<pre><code class="lang-bash">$ cat tokenator/.env
RAILS_SECRET_TOKEN=b938f...
DB_HOST=localhost</code></pre>
<pre><code class="lang-bash">$ cat ~/.profile
...
<span class="comment"># Overriding cd function. Looking for .env and sourcing it if found</span>
function cd {
    builtin cd <span class="string">"$@"</span>
  <span class="keyword">if</span> <span class="test_condition">[[ -f .env ]]</span>; <span class="keyword">then</span>
    <span class="keyword">echo</span> <span class="string">"### Setting up environment variables from .env"</span>
    cat .env | grep -v <span class="string">'#'</span> | grep -v <span class="string">'^$'</span> | grep -v <span class="string">'PATH'</span>| <span class="keyword">while</span> read line; <span class="keyword">do</span>
      <span class="keyword">echo</span> <span class="variable">$line</span>
      export <span class="variable">$line</span>
    <span class="keyword">done</span>
  <span class="keyword">fi</span>
}
...</code></pre>

    </section>
  </div>
  <div class="slide hidden -" id="slide-27">
    <section class="slide-content">
      <div class="slide-number">27</div>
      <h3 id="per-project-environment-configuration">Per-project Environment Configuration</h3>
<pre><code class="lang-bash">$ cd tokenator
<span class="comment">### Setting up environment variables from .env</span>
RAILS_SECRET_TOKEN=b938f...
DB_HOST=localhost</code></pre>

    </section>
  </div>
  <div class="slide hidden -" id="slide-28">
    <section class="slide-content">
      <div class="slide-number">28</div>
      <h3 id="conclusions">Conclusions</h3>
<ul>
<li>A little UNIX goes a long way</li>
<li>The whole is greater than the sum</li>
</ul>

    </section>
  </div>
  <div class="slide hidden -" id="slide-29">
    <section class="slide-content">
      <div class="slide-number">29</div>
      <h3 id="further-inspiration">Further Inspiration</h3>
<ul>
<li>www.destroyallsoftware.com (Gary Bernhardt)</li>
<li>linuxcommand.org</li>
<li>cli.learncodethehardway.org</li>
</ul>

    </section>
  </div>
  <div class="slide hidden" id="slide-30">
    <section class="slide-content">
      <div class="slide-number">30</div>
      <div class="author">
  <h1 class="name">Ylan Segal</h1>
    <h3 class="twitter">
      <a href="http://twitter.com/@ylansegal">@ylansegal</a>
    </h3>
    <h3 class="url">
      <a href="http://ylan.segal-family.com">http://ylan.segal-family.com</a>
    </h3>
    <h3 class="email">
      <a href="mailto:ylan@segal-family.com">ylan@segal-family.com</a>
    </h3>
</div>

    </section>
  </div>

  <div class="controls">
    
    <div class="arrow prev"></div>
    <div class="arrow next"></div>
  </div>


  <script type="text/javascript">
    /**
 * Returns the current page number of the presentation.
 */
function currentPosition() {
  return parseInt(document.querySelector('.slide:not(.hidden)').id.slice(6));
}


/**
 * Navigates forward n pages
 * If n is negative, we will navigate in reverse
 */
function navigate(n) {
  var position = currentPosition();
  var numSlides = document.getElementsByClassName('slide').length;

  /* Positions are 1-indexed, so we need to add and subtract 1 */
  var nextPosition = (position - 1 + n) % numSlides + 1;

  /* Normalize nextPosition in-case of a negative modulo result */
  nextPosition = (nextPosition - 1 + numSlides) % numSlides + 1;

  document.getElementById('slide-' + position).classList.add('hidden');
  document.getElementById('slide-' + nextPosition).classList.remove('hidden');

  updateProgress();
  updateURL();
  updateTabIndex();
}


/**
 * Updates the current URL to include a hashtag of the current page number.
 */
function updateURL() {
  window.history.replaceState({} , null, '#' + currentPosition());
}


/**
 * Sets the progress indicator.
 */
function updateProgress() {
  var progressBar = document.querySelector('.progress-bar');

  if (progressBar !== null) {
    var numSlides = document.getElementsByClassName('slide').length;
    var position = currentPosition() - 1;
    var percent = (numSlides === 1) ? 100 : 100 * position / (numSlides - 1);
    progressBar.style.width = percent.toString() + '%';
  }
}


/**
 * Removes tabindex property from all links on the current slide, sets
 * tabindex = -1 for all links on other slides. Prevents slides from appearing
 * out of control.
 */
function updateTabIndex() {
  var allLinks = document.querySelectorAll('.slide a');
  var position = currentPosition();
  var currentPageLinks = document.getElementById('slide-' + position).querySelectorAll('a');
  var i;

  for (i = 0; i < allLinks.length; i++) {
    allLinks[i].setAttribute('tabindex', -1);
  }

  for (i = 0; i < currentPageLinks.length; i++) {
    currentPageLinks[i].removeAttribute('tabindex');
  }
}

/**
 * Determines whether or not we are currently in full screen mode
 */
function isFullScreen() {
  return document.fullscreenElement ||
         document.mozFullScreenElement ||
         document.webkitFullscreenElement ||
         document.msFullscreenElement;
}

/**
 * Toggle fullScreen mode on document element.
 * Works on chrome (>= 15), firefox (>= 9), ie (>= 11), opera(>= 12.1), safari (>= 5).
 */
function toggleFullScreen() {
  /* Convenient renames */
  var docElem = document.documentElement;
  var doc = document;

  docElem.requestFullscreen =
      docElem.requestFullscreen ||
      docElem.msRequestFullscreen ||
      docElem.mozRequestFullScreen ||
      docElem.webkitRequestFullscreen.bind(docElem, Element.ALLOW_KEYBOARD_INPUT);

  doc.exitFullscreen =
      doc.exitFullscreen ||
      doc.msExitFullscreen ||
      doc.mozCancelFullScreen ||
      doc.webkitExitFullscreen;

  isFullScreen() ? doc.exitFullscreen() : docElem.requestFullscreen();
}

document.addEventListener('DOMContentLoaded', function () {
  // Update the tabindex to prevent weird slide transitioning
  updateTabIndex();

  // If the location hash specifies a page number, go to it.
  var page = window.location.hash.slice(1);
  if (page) {
    navigate(parseInt(page) - 1);
  }

  document.onkeydown = function (e) {
    var kc = e.keyCode;

    // left, down, H, J, backspace, PgUp - BACK
    // up, right, K, L, space, PgDn - FORWARD
    // enter - FULLSCREEN
    if (kc === 37 || kc === 40 || kc === 8 || kc === 72 || kc === 74 || kc === 33) {
      navigate(-1);
    } else if (kc === 38 || kc === 39 || kc === 32 || kc === 75 || kc === 76 || kc === 34) {
      navigate(1);
    } else if (kc === 13) {
      toggleFullScreen();
    }
  };

  if (document.querySelector('.next') && document.querySelector('.prev')) {
    document.querySelector('.next').onclick = function (e) {
      e.preventDefault();
      navigate(1);
    };

    document.querySelector('.prev').onclick = function (e) {
      e.preventDefault();
      navigate(-1);
    };
  }
});


  </script>
</body>
</html>
